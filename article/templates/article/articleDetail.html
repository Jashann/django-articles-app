{% extends 'base/base.html' %} 

{% block title %} {{article.title}} {% endblock %}


{% block content %}

<div class="article">
    <img class="img-fluid rounded-3" src="{{article.cover_image.url}}" alt="{{article.title}">
    
    <h1 class="pt-5 text-center">{{article.title}}</h1>
    
    <p>{{article.body|linebreaks}}</p>
      
</div>


{% comment %} Start of reviews {% endcomment %}

<div class="bg-success p-5 rounded-3 text-light">

    <h1 class="text-light">Reviews</h1>

    {% if user.is_authenticated %}    
        <form action="/article/submit-review" method="post" class="mt-2 mb-5">
            
            {% csrf_token %}

            {% if request.session.error %}
                <div class="alert alert-dismissible alert-danger mt-5">
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    <strong>{{request.session.error}}</strong>
                </div>
            {% endif %}

            <h2 class="mt-5 mb-3 text-light">Write a review</h2>

            <div class="form-group mb-2">
                <input name="reviewTitle" type="text" class="form-control" id="reviewTitle" placeholder="Title">
            </div>

            <div class="form-group">
                <textarea name="reviewBody" class="form-control rounded-3" id="reviewBody" rows="5" spellcheck="false" data-ms-editor="true" placeholder="Share what you think about the article in detail..." ></textarea>
            </div>

            <input type="hidden" name="articleID" value="{{article.id}}">

            <button type="submit" class="btn btn-light rounded-pill mt-2 fw-bolder">Submit</button>
        </form>
    {% endif %}

    {% for review in reviews %}
        {% comment %} <h2>{{review.title}} -- {{review.user.username}}</h2> {% endcomment %}
        
        <div class="review card text-dark rounded-20 p-3 mt-4">
            <div>
                {% load static %}
                <img src="{% static 'base/person.svg' %}" class="person d-inline-block me-2" /> 
                <strong class="text-capitalize">{{review.user.username}}</strong>
                &nbsp ----- &nbsp
                <small>{{review.createdAt}} (UTC)</small>
            </div>
            <br>
            <h4><strong>{{review.title}}</strong></h4>
        
            <p>{{review.body}}</p>

        </div>
    
    {% endfor %}

 </div>


{% endblock %}
